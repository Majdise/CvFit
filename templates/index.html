<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CV Analyzer • Role Fit & Experience Enhancer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="/static/styles.css" rel="stylesheet" />
</head>
<body>
  <header class="site-header">
    <h1>CV Analyzer</h1>
    <p class="subtitle">Analyze fit, get improvements, and auto-craft experience bullets for a role.</p>
  </header>

  <main class="container">
    <section class="card">
      <h2>1) Upload CV & Paste Role</h2>
      <form id="analyzeForm">
        <div class="grid-2">
          <div>
            <label class="label">Your CV (PDF/DOCX/TXT)</label>
            <input type="file" name="cv_file" id="cv_file" accept=".pdf,.docx,.txt" required />
            <p class="hint">Max ~5–10MB. We extract text locally and send to the API.</p>
          </div>

          <div>
            <label class="label">Role / Job Description</label>
            <textarea id="job_description" name="job_description" rows="10" placeholder="Paste the role description…"></textarea>
            <div class="row space-between">
              <button class="btn btn-secondary" type="button" id="btnUseSample">Use Sample JD</button>
              <button class="btn btn-ghost" type="button" id="btnClearJD">Clear</button>
            </div>
          </div>
        </div>

        <div class="row gap">
          <button class="btn" type="submit" id="btnAnalyze">Analyze Fit</button>
          <button class="btn btn-ghost" type="button" id="btnClearAll">Reset</button>
        </div>
      </form>

      <div id="spinner" class="spinner hidden">
        <div class="loader"></div>
        <span>Analyzing with AI…</span>
      </div>

      <div id="errorBox" class="alert hidden"></div>
    </section>

    <section id="results" class="card hidden">
      <h2>2) Results</h2>

      <div class="result-grid">
        <div class="result-box">
          <h3>Fit Score</h3>
          <div id="fitScore" class="fit-badge">–</div>
          <p id="fitReason" class="muted"></p>
        </div>

        <div class="result-box">
          <h3>Salary Note</h3>
          <p id="salaryNote" class="mono"></p>
          <button class="btn btn-small" type="button" data-copy="#salaryNote">Copy</button>
        </div>

        <!-- Optional model display -->
        <div class="result-box">
          <h3>Model</h3>
          <p id="modelName" class="mono">—</p>
        </div>
      </div>

      <div class="stack">
        <div class="result-box">
          <h3>Improvement Suggestions</h3>
          <ul id="suggestions"></ul>
          <div class="row gap">
            <button class="btn btn-small" type="button" id="btnCopySuggestions">Copy All</button>
            <button class="btn btn-small btn-secondary" type="button" id="btnDownloadJSON">Download JSON</button>
          </div>
        </div>

        <div class="result-box">
          <div class="row space-between">
            <h3>Experience Enhancer <span id="xpSource" class="badge muted"></span></h3>
            <div class="row gap">
              <button class="btn btn-small" type="button" id="btnGenBullets">Generate Bullets</button>
              <button class="btn btn-small" type="button" id="btnCopyBullets" disabled>Copy Bullets</button>
            </div>
          </div>
          <p class="hint">
            We’ll craft resume bullets aligned to the JD, using the suggestions and key terms. Use these to refine your “Experience” section.
          </p>
          <ul id="xpBullets" class="bullets"></ul>
        </div>
      </div>
    </section>

    <section id="debug" class="card hidden">
      <h3>Debug / Raw JSON</h3>
      <pre id="rawJSON" class="code"></pre>
    </section>

  </main>

  <footer class="site-footer">
    <span>© <span id="year"></span> CV Analyzer</span>
    <div class="row gap">
      <button class="btn btn-ghost btn-small" id="btnToggleDebug" type="button">Toggle Debug</button>
      <a class="btn btn-ghost btn-small" href="/docs" target="_blank" rel="noreferrer">API Docs</a>
    </div>
  </footer>

  <script src="/static/app.js"></script>
</body>
</html>